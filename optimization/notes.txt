100 мсек звука 
с частотой дискретизации 40 кГц - 1 отсчёт за 25 мкс
4000 отсчётов много -> 4096 измерений


В МК 20Кб РАМ
20480 б 


4096 б измерений
при передаче в  ФФТ 8192 б
при результат   ФФТ 8192 б -> 2048 б элементов
Одновременно 16к байт слишком много 

Что можно сделать?
Пердавать в ФФТ не комплекс а U8
Объеденить результат и входные данные
Считать модуль как можно скорее

Надо портировать ФФТ на МК...